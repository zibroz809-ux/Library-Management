<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.library.controllers.LoanController"
            style="-fx-background-color: #f5f5f5;">

    <top>
        <VBox spacing="10" style="-fx-padding: 15; -fx-background-color: #2196F3;">
            <Label text="ðŸ“š Manage Loans" 
                   style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: white;" />
            <Label fx:id="labelStats" text="Total Active Loans: 0 | Overdue: 0"
                   style="-fx-font-size: 11; -fx-text-fill: #e0e0e0;" />
        </VBox>
    </top>

    <center>
        <VBox spacing="10" style="-fx-padding: 10;">
            <!-- Search and Filter Bar -->
            <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 0 0 1 0;">
                <Label text="ðŸ” Search:" style="-fx-font-weight: bold;" />
                <TextField fx:id="searchField" promptText="Search by borrower, book, or loan ID..." prefWidth="300" />
                <Button fx:id="btnClear" text="Clear" style="-fx-padding: 5 15 5 15;" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="labelShowingResults" text="Showing all loans" style="-fx-font-size: 10; -fx-text-fill: #666;" />
            </HBox>

            <!-- Table View -->
            <TableView fx:id="tableLoans" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colLoanId" text="Loan ID" prefWidth="70"/>
                    <TableColumn fx:id="colBook" text="Book Title" prefWidth="180"/>
                    <TableColumn fx:id="colBorrower" text="Borrower" prefWidth="120"/>
                    <TableColumn fx:id="colBranch" text="Branch" prefWidth="100"/>
                    <TableColumn fx:id="colDateOut" text="Date Out" prefWidth="90"/>
                    <TableColumn fx:id="colDueDate" text="Due Date" prefWidth="90"/>
                    <TableColumn fx:id="colDateIn" text="Date Returned" prefWidth="100"/>
                    <TableColumn fx:id="colStatus" text="Status" prefWidth="85"/>
                </columns>
            </TableView>
        </VBox>
    </center>

    <bottom>
        <HBox spacing="10" style="-fx-padding: 15; -fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1 0 0 0;">
            <Button text="âž• Add Loan" fx:id="btnAdd" 
                    style="-fx-padding: 10 20 10 20; -fx-font-size: 11; -fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;" />
            <Button text="âœ“ Return Book" fx:id="btnReturn" 
                    style="-fx-padding: 10 20 10 20; -fx-font-size: 11; -fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-weight: bold;" />
            <Button text="ðŸ—‘ï¸ Delete Loan" fx:id="btnDelete" 
                    style="-fx-padding: 10 20 10 20; -fx-font-size: 11; -fx-background-color: #f44336; -fx-text-fill: white; -fx-font-weight: bold;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="labelLastAction" text="" style="-fx-font-size: 10; -fx-text-fill: #666;" />
        </HBox>
    </bottom>

</BorderPane>
